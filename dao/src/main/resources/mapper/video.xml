<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace用作标识mapper的唯一，通常包名+文件名 -->
<mapper namespace="com.cjt.dao.IVideoDAO">

    <resultMap id="videoMap" type="com.cjt.entity.model.Video">
        <id column="id" property="id"/>
        <result column="vid" property="vid"/>
        <result column="title" property="title"/>
        <result column="poster_url" property="posterUrl"/>
        <result column="date" property="date"/>
        <result column="indexUrl" property="indexUrl"/>
    </resultMap>

    <select id="listVideo" resultMap="videoMap">
        SELECT *
        FROM video
        LIMIT #{start}, #{limit}
    </select>

    <select id="coutVideo" resultType="int">
        SELECT COUNT(*)
        FROM video
    </select>

    <insert id="saveVideo" parameterType="com.cjt.entity.model.Video"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO video (vid, title, poster_url, date, index_url)
        VALUES (#{vid}, #{title}, #{posterUrl}, #{date}, #{indexUrl})
    </insert>

    <insert id="saveVideos">
        INSERT INTO video (vid, title, poster_url, date, index_url) VALUES
        <foreach collection="list" item="video" separator=",">
            (#{video.vid}, #{video.title}, #{video.posterUrl}, #{video.date}, #{video.indexUrl})
        </foreach>
    </insert>

    <select id="listVid" resultType="String">
        SELECT vid FROM video
    </select>

    <delete id="removeVideoByVid" parameterType="int">
        DELETE FROM video
        WHERE vid = #{vid}
    </delete>
</mapper>